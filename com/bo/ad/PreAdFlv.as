package com.bo.ad {	import flash.display.Loader;	import flash.events.Event;	import flash.net.URLRequest;	import org.osmf.media.MediaPlayerSprite;	import org.osmf.elements.VideoElement;	import org.osmf.media.URLResource;	import org.osmf.events.MediaPlayerStateChangeEvent;	import org.osmf.media.MediaPlayerState;	//import org.osmf.layout.ScaleMode;		public class PreAdFlv extends PreAdBase{		private var mps:MediaPlayerSprite;		private var url:String;		private var reload:Boolean=true;		private var hasShownCount:Boolean=false;		public function PreAdFlv() {			// constructor code		}		public override function initAndPlay():void{			var xml:XML=Global.adParameter.adxml.chan[0];			duration=Global.adParameter.adxml.chan[0].parts.part[0].sec;			url=xml.parts.part[0].s;			trace(url);			mps=new MediaPlayerSprite();			mps.mediaPlayer.addEventListener(MediaPlayerStateChangeEvent.MEDIA_PLAYER_STATE_CHANGE,onstatechange);			var media:VideoElement=new VideoElement(new URLResource(url));			media.smoothing=true;			mps.media=media;			//mps.scaleMode=ScaleMode.LETTERBOX;			mps.width=Global.appWidth;			mps.height=Global.appHeight-29;			addChild(mps);		}		private function onstatechange(evt:MediaPlayerStateChangeEvent):void{			if(evt.state==MediaPlayerState.PLAYING){				if(reload)reload=false;				else{					if(duration==0){						duration=mps.mediaPlayer.duration;					}					if(!hasShownCount){						showCount();						hasShownCount=true;					}				}			}else if(evt.state==MediaPlayerState.PLAYBACK_ERROR){				dispose();			}		}	}	}