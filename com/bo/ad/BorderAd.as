package com.bo.ad {	import flash.display.Sprite;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.display.SimpleButton;	import flash.filters.DropShadowFilter;	import flash.utils.Timer;	import flash.events.TimerEvent;	import flash.utils.setTimeout;	import flash.events.MouseEvent;	import flash.net.navigateToURL;	import flash.net.URLRequest;	public class BorderAd extends Sprite{		private var backwidth:int=400;		private var backheight:int=66;		private var backx:int=10;		private var backy:int=10;		private var backcolor:uint=0x666666;		private var backalpha:Number=0.8;   //背景颜色透明度		private var txt:TextField;  //广告内容		private var tf:TextFormat=new TextFormat();		private var clsbutton:SimpleButton;		private var tfshadow:DropShadowFilter=new DropShadowFilter(4,45);		private var stagetimer:Timer=new Timer(10000);		private var adtitle:String="Turn ideas into action with \n BlackBerry. Learn more.";		private var adlink:String="http://www.baidu.com";		private var clsposition:int=0;  //关闭按钮位置  0右下角  1左下角		private var par:Sprite;		private var xml:XML;		private var exists:Boolean=false;		public function BorderAd(par1:Sprite,index:int) {			xml=Global.adParameter.adxml.chan[index+4];			if(xml.t!="non"){				exists=true;				//backwidth=100;				//backheight=50;				backwidth=xml.parts.part[0].w;				backheight=xml.parts.part[0].h;				if(index==0){					backx=0;					backy=0;				}else if(index==1){					backx=Global.appWidth-backwidth;					backy=0;				}else if(index==2){					backx=Global.appWidth-backwidth;					backy=Global.appHeight-29-backheight;				}else if(index==3){					backx=0;					backy=Global.appHeight-29-backheight;				}				var bc:String=xml.contentbg;				bc=bc.replace("#","0x");				backcolor=uint(bc);				//backcolor=xml.contentbg;				backalpha=xml.transparency/100;				adtitle=xml.textcontent;				adlink=xml.parts.part[0].c;								par=par1;			}		}		public function rearrange():void{					}		public function show():void{			if(exists){				buttonMode=true;				graphics.beginFill(backcolor,backalpha);				graphics.drawRect(0,0,backwidth,backheight);				graphics.endFill();				txt=new TextField();				txt.filters=[tfshadow];				txt.width=backwidth-20;				txt.height=backheight;				txt.text=adtitle;				txt.textColor=0xffffff;				txt.selectable=false;				txt.wordWrap=true;				addChild(txt);				clsbutton=new ClsButton();				clsbutton.y=clsbutton.height-clsbutton.height-2;				if(clsposition==0){					clsbutton.x=width-clsbutton.width-2;				}else{					clsbutton.x=2;				}												clsbutton.addEventListener(MouseEvent.CLICK,onHide);				addChild(clsbutton);				addEventListener(MouseEvent.CLICK,onLink);				x=backx;				y=backy;				alpha=backalpha;				trytoshow();				//setTimeout(trytoshow,1000);			}		}		private function onLink(evt:MouseEvent):void{			navigateToURL(new URLRequest(adlink),"_blank");		}		private function onStageTimer(evt:TimerEvent):void{			alpha=0.5;		}		private function onMove(evt:MouseEvent):void{			alpha=backalpha;			stagetimer.reset();			stagetimer.start();		}		private function trytoshow():void{			if(Global.mps){				//Global.mps.addChild(this);				par.addChild(this);				stagetimer.addEventListener(TimerEvent.TIMER,onStageTimer);				stagetimer.start();				addEventListener(MouseEvent.MOUSE_MOVE,onMove);			}else{				setTimeout(trytoshow,1000);			}		}		public function hide():void{			par.removeChild(this);			//Global.mps.removeChild(this);			txt=null;			clsbutton.removeEventListener(MouseEvent.CLICK,onHide);			clsbutton=null;			graphics.clear();		}		private function onHide(evt:MouseEvent):void{			evt.stopImmediatePropagation();			hide();		}	}	}