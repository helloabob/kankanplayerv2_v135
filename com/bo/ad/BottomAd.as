package com.bo.ad {	import flash.display.Sprite;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.TextFormatAlign;	import flash.display.SimpleButton;	import flash.filters.DropShadowFilter;	import flash.display.Loader;	import flash.utils.Timer;	import flash.events.TimerEvent;	import flash.events.MouseEvent;	import flash.ui.Mouse;	import flash.events.Event;	import flash.net.URLRequest;	import flash.net.navigateToURL;		public class BottomAd extends Sprite{				private var backwidth:int=400;		private var backheight:int=66;		private var movetype:int=0;  //0淡入淡出   1底部飞入		//private var adarray:Array=new Array();  //广告集合 最多3个广告   每个object  adtype,adtitle,adimageurl,adlink,width,height,imagewidth,imageheigth ;		private var adarray:Array=new Array();		private var curad:int=0;   //当前广告index		//private var txt:TextField;  //广告内容		//private var tf:TextFormat=new TextFormat();		//private var imageld:Loader;		//private var clsbutton:SimpleButton;		//private var tfshadow:DropShadowFilter=new DropShadowFilter(4,45);		private var adtimer:Timer=new Timer(5000,1);		private var consp:Sprite=new Sprite();   			   //广告位面板		private var listsp:Sprite=new Sprite();  			   //左侧选择面板		private var showsp:Sprite=new Sprite(); 			   //整块面板		private var hidesp:Sprite=new FlippedChevronIcon();  //隐藏的小箭头面板		private var stagetimer:Timer=new Timer(10000);		private var adcount:int=0;		public function BottomAd() {			// constructor code			addChild(showsp);			showsp.addChild(consp);						consp.addEventListener(MouseEvent.CLICK,onLink);			consp.buttonMode=true;			adtimer.addEventListener(TimerEvent.TIMER_COMPLETE,onTimerComplete);			stagetimer.addEventListener(TimerEvent.TIMER,onStageTimer);			stagetimer.start();			addEventListener(MouseEvent.MOUSE_MOVE,onMove);			adcount=Global.adParameter.bottomAdCount;			for(var i:int=0;i<adcount;i++){				trace(i);				var bab:BottomAdBase=new BottomAdBase();				bab.initAndShow(i);				bab.addEventListener("close",onHide);				adarray.push(bab);			}						/*for(var i:int;i<3;i++){				var obj:Object=new Object();				obj.adtitle="Turn ideas into action with \n BlackBerry. Learn more."+i.toString();				obj.adimageurl="http://static.statickksmg.com/image/2012/03/30/90472b90-e70e-4e0a-8d47-c478ef2b2327/jpg_AnHuiTV201203300649181537441356677.jpg";				obj.link="http://www.baidu.com";				obj.width=400;				obj.height=66;				obj.imagewidth=88;				obj.imageheight=66;				adarray.push(obj);			}*/			if(adcount>1){				consp.x=30;				for(var j:int;j<adcount;j++){					var sp:ListIcon=new ListIcon();					sp.myindex=j;					listsp.addChild(sp);					sp.x=10;					sp.y=7+j*20;				}				listsp.addEventListener("adchange",onAdChange);			}						showsp.addChild(listsp);			//arrangeComponent();			rearrange();						hidesp.visible=false;			hidesp.buttonMode=true;			hidesp.x=backwidth/2;			hidesp.y=backheight-20;			addChild(hidesp);			hidesp.addEventListener(MouseEvent.CLICK,onShow);		}		private function onLink(evt:MouseEvent):void{			navigateToURL(new URLRequest(adarray[curad].link),"_blank");		}		private function onHide(evt:Event):void{						showsp.visible=false;			hidesp.visible=true;		}		private function onShow(evt:MouseEvent):void{			showsp.visible=true;			hidesp.visible=false;		}		private function onAdChange(evt:Event):void{			trace('i catch the event here');			var obj:*=evt.target;			if(obj.myindex!=curad){				curad=obj.myindex;				rearrange();			}		}		private function onStageTimer(evt:TimerEvent):void{			showsp.alpha=0.5;		}		private function onMove(evt:MouseEvent):void{			showsp.alpha=1;			stagetimer.reset();			stagetimer.start();		}		private function onTimerComplete(evt:TimerEvent):void{			if(curad+1==adarray.length){				curad=0;			}else{				curad++;			}			adtimer.reset();			rearrange();		}		private function arrangeComponent():void{					}				private function rearrange():void{			adtimer.reset();			if(adcount>1){				for(var i:int;i<adcount;i++){					var li:ListIcon=listsp.getChildAt(i) as ListIcon;					if(i==curad)li.select();					else li.unselect();				}			}			for(var j:int=0;j<adcount;j++){				var tmp:BottomAdBase=adarray[j] as BottomAdBase;				if(consp.contains(tmp)){					consp.removeChild(tmp);					//trace('remove bottom ad');				}							}			consp.addChild(adarray[curad]);			/*var obj:Object=adarray[curad];			if(adtype==0){				txt.text=obj.adtitle;				txt.width=obj.width;				txt.height=obj.height;				txt.x=width/2-txt.width/2;				txt.y=height/2-txt.height/2;			}else if(adtype==1){				imageld.load(new URLRequest(obj.adimageurl));			}else if(adtype==2){				txt.text=obj.adtitle;				txt.width=obj.width-obj.imagewidth-20;				txt.height=obj.height;				txt.x=obj.imagewidth+10;				txt.y=obj.height/2-txt.height/2;				imageld.load(new URLRequest(obj.adimageurl));			}*/			adtimer.start();		}	}	}